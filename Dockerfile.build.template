#This Dockerfile will be used to encapsulate the 'build' when './build --docker-image' is set
ARG DOCKER_IMAGE=""
FROM ${DOCKER_IMAGE} as prod

ARG PACKAGE=""

RUN mkdir -p ./$PACKAGE/
COPY Dockerfile.build build* package* ./$PACKAGE/
COPY source/ ./${PACKAGE}/source/

WORKDIR ./$PACKAGE/

RUN [ -x ./build ] && cd source && ../build || echo "no build"